<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BDLV Gaming</title>
    <link rel="stylesheet" th:href="@{/css/admin.css}">
</head>
<body>

<!--trang home -->
<div id="home">
    <!-- header -->
    <header>
        <div class="main-header">
            <div class="logo">
                <img th:src="@{/img/home/logo.png}" alt="logo">
                <a th:href="@{/admin}">
                    <p>ADMIN</p>
                </a>
            </div>
            <nav class="nav-menu">
                <div class="main-header-category">
                </div>
            </nav>
            <div class="icons">
<!--                để xem profile-->
                <a href="#"><img th:src="@{/img/admin/admin.png}" alt="Lỗi hiển thị"></a>
                <p th:text="${admin.email}"></p>
            </div>
        </div>
    </header>

    <!-- content -->
    <div class="content">
        <!-- sidebar -->
        <div class='sidebar'>
            <div class="sidebar-options">
                <a th:href='@{/admin}' class="sidebar-option">
                    <img th:src="@{/img/admin/list.png}" alt="Lỗi hiển thị"/>
                    <p>Danh sách game</p>
                </a>
                <a th:href='@{/addGameForm}' class="sidebar-option">
                    <img th:src="@{/img/admin/add.png}" alt="Lỗi hiển thị"/>
                    <p>Thêm game</p>
                </a>
                <a th:href='@{/listUsers}' class="sidebar-option">
                    <img th:src="@{/img/admin/list.png}" alt="Lỗi hiển thị"/>
                    <p>Thông tin User</p>
                </a>
            </div>
        </div>

        <!-- Popup -->
        <div class="popup-overlay" id="popup">
            <div class="popup-box">
                <h2>Thông báo</h2>
                <p class="container text-center" th:if="${success != null}" th:text="${success}"></p>
                <p class="container text-center" th:if="${error != null}" th:text="${error}"></p>
            </div>
        </div>

        <!--  form add game
            enctype="multipart/form-data": để upload đc file img
        -->
        <form class="add-game" action="#"
              th:action="@{/saveGame}"
              th:object="${newGame}"
              method="POST"
              enctype="multipart/form-data">
            <div class="game-name-price-des">
                <label for="gameName">
                    Tên game
                    <input type="text" th:field="*{gameName}"
                           class="form-control mb-4 col-4"
                           id="gameName"
                           required
                    >
                </label>
                <label for="price">
                    Giá game
                    <input type="text" th:field="*{price}"
                           class="form-control mb-4 col-4"
                           id="price"
                           required
                    >
                </label>

                <label>
                    Mô tả
                    <textarea rows="10" th:field="*{description}" class="form-control mb-4 col-4" id="description"
                    ></textarea>
                </label>
            </div>
            <div class="game-img-category-btn">
                <div class="image-container">
                    <p>Ảnh game</p>
                    <div id="imagePreview" class="image-preview" title="Nhấp để thay đổi ảnh"></div>
<!--                accept="image/*": Thuộc tính này chỉ định rằng chỉ những tệp hình ảnh (tất cả các định dạng hình ảnh) mới được phép chọn.-->
                    <input type="file" id="imageInput" accept="image/*" class="hidden" th:field="*{gameImg}" required>
                </div>

                <div class="category-checkbox">
                    <p class="category">Thể loại</p>
                    <div class="category-checkbox-detail">
                        <div th:each="category:${categoryList}" class="checkbox-label">
                            <input type="checkbox"
                                   th:id="${category.categoryId}"
                                   th:field="*{categoryIds}"
                                   th:value="${category.categoryId}">
                            <label th:for="${category.categoryId}">[[${category.categoryName}]]</label>
                        </div>
                    </div>
                </div>
                <button id="btn-save" type="submit" class="btn btn-info col-2">Save game</button>
            </div>

        </form>

    </div>

    <!-- footer -->
    <footer>
        <div class="footer" id="footer">
            <div class="footer-content">
                <div class="footer-content-left">
                    <img th:src="@{/img/home/logo.png}" alt="logo">
                    <p>
                        BDLV Gaming là web bán game đa nền tảng (Steam, Epic Games, EA Games, Ubisoft) với giá cực kỳ
                        hợp lý. BDLV Gaming cam kết mang đến trải nghiệm mua game
                        bản quyền an toàn, uy tín và tiết kiệm.
                    </p>
                </div>
                <div class="footer-content-center">
                    <h2>Công ty BDLV GAMING</h2>
                    <ul>
                        <li>Trang chủ</li>
                        <li>Về chúng tôi</li>
                        <li>Đơn hàng của bạn</li>
                        <li>Chính sách</li>
                    </ul>
                </div>
                <div class="footer-content-right">
                    <h2>Liên hệ với chúng tôi thông qua</h2>
                    <ul>
                        <li>0933-223-872</li>
                        <li>BDLVGaming@gmail.com</li>
                    </ul>
                </div>
            </div>
            <hr/>
            <p class="footer-copyright">
                Copyright 2024 &copy; BDLVGaming.com - All Right Reserved
            </p>
        </div>
    </footer>

</div>

<script>
    const imageInput = document.getElementById("imageInput");
    const imagePreview = document.getElementById("imagePreview");

    // Khi chọn file
    imageInput.addEventListener("change", (event) => {
        const file = event.target.files[0]; // Lấy file đã chọn
        if (file) {
            const reader = new FileReader();

            // Đọc file và hiển thị trong div
            reader.onload = (e) => {
                imagePreview.style.backgroundImage = `url('${e.target.result}')`;
                imagePreview.style.border = "none"; // Xóa viền khi có ảnh
            };

            reader.readAsDataURL(file);
        }
    });

    // Khi nhấp vào ảnh, mở input để chọn lại ảnh
    imagePreview.addEventListener("click", () => {
        imageInput.click();
    });
</script>
</body>
</html>